 12:14

BEGIN TESTING ALL

TEST 1  12:14
name in pr ->foobaaarwxyz<-
Test 1 done, error=0

TEST 2  12:14
name in pr ->foob5678x<-
Test 2 done, error=0

TEST 3  12:14
name in pr ->foob<-
Test 3 done, error=0

TEST 4  12:14
name in pr ->foo(baaarwxyz<-
Test 4 done, error=0

TEST 5  12:14
symbol
fname,lname,cursor= 5 10 11
Test 5 done, error=0

TEST 6  12:14
pr ->char symbol, 34567890<-
pr ->23456789012345<-
Test 6 done, error=0

TEST 7  12:14
cursor->char symbol, more stuff
match,cursor= 1 4
cursor-> symbol, more stuff
match,cursor= 0 5
cursor->symbol, more stuff
Test 7 done, error=0

TEST 8  12:14
Test 8 done, error=0

TEST 9  12:14
alpha is 10
beta is -20
gamma is 30
kappa is 99
delta is ->hello<-
epsilong is ->,<-
zeta is ->world<-
theta is ->the cat in the hat<-
eta is -><-
Test 9 done, error=0

TEST 10  12:14
 empty case
Test 10 done, error=0

TEST 11  12:14
test 11, stack, popped val is 7
Test 11 done, error=0

TEST 12  12:14
nxtstack 0
after 4 pushes nxtstack 4
begin 5 pops

first pop done:
array has 0 0 0 0 
val = 77
val = c
before 5th pop err: 0
nxtstack 0

after 5th pop err: 15
Test 12 done, error=15

TEST 13  12:14
at start cursor,epr,error = 1 35 0
cursor->}   {}   {{}{{}}}   {    STRING-END
4 skips: 
err,cursor = 0    {}   {{}{{}}}   {    STRING-END
err,cursor = 0    {{}{{}}}   {    STRING-END
err,cursor = 0    {    STRING-END
err,cursor = 1 D
Test 13 done, error=0

TEST 14  12:14
BEFORE _rem()
cursor 0-->   

  /* a tiny-c style comment   
next-line  string-end
AFTER _rem()
cursor 36-->next-line  string-end
Test 14 done, error=0

TEST 15  12:14
1 cursor->   17  "hello"  'c'  STRING-END<-
konst returns 2 17
2 cursor->  "hello"  'c'  STRING-END<-
konst returns 3 hello
3 cursor->  'c'  STRING-END<-
konst returns 1 c
4 cursor->  STRING-END<-
konst returns 0 
5 cursor->STRING-END<-
Test 15 done, error=0

TEST 16  12:14
pr->   17  "hello"  'c'  STRING-END
3 _factor()'s
3 popst()'s
 char c
 string hello
 int 17
Test 16 done, error=0

TEST 17  12:14
name in pr ->foobaaarwx<-
name in pr ->foob5678<-
name in pr ->foob<-
name in pr ->foo(baaarwxyz<-
look up foo
look up foob5678
look up foobaaaz
Test 17 done, error=0

TEST 18  12:14
asgn returned 1, 1+2 is 3
asgn returned 1, 1+2+3 is 6
asgn returned 1, 1*2 is 2
asgn returned 1, (1+2)*3 is 9
Test 18 done, error=0

TEST 19  12:14
1<2 is 1 
1>2 is 0 
1==2 is 0 
1!=2 is 1 
1>=2 is 0 
1<=2 is 1 
2<2 is 0 
2>2 is 0 
2==2 is 1 
2!=2 is 0 
2>=2 is 1 
2<=2 is 1 
2<1 is 0 
2>1 is 1 
2==1 is 0 
2!=1 is 1 
2>=1 is 1 
2<=1 is 0 
Test 19 done, error=0

TEST 20  12:14
7+2 is 9 
7-2 is 5 
7*2 is 14 
7/2 is 3 
7%2 is 1 
Test 20 done, error=0

TEST 21  12:14
pr: char a; a='A'; 
Test 21 done, error=0

TEST 22  12:14
pr:  char a; int x; char p(7); xXXXXXXXXXXXXXXXXXXXXx
decl char a
prused,obsize 30 0 
20 63 68 61 72 20 70 28 37 29 3b 20 78 58 58 0 58 58 58 58 58 58 58 58 58 58 58 58 58 58 58 58 58 78 
decl int x
prused,obsize 34 0 
20 63 68 61 72 20 70 28 37 29 3b 20 78 58 58 0 0 0 0 0 58 58 58 58 58 58 58 58 58 58 58 58 58 78 
decl char p(7)
prused,obsize 42 0 
20 63 68 61 72 20 70 28 37 29 3b 20 78 58 58 0 0 0 0 0 0 0 0 0 0 0 0 0 58 58 58 58 58 78 
prused,obsize 42 0 
Test 22 done, error=0

TEST 23  12:14
pr:  int x; x=77;  xXXXXXXXXXXXXXXXXXXXXx
parsing int x;
78 58 58 0 0 0 0 58 58 58 58 58 58 58 58 58 58 58 58 58 58 78 
parsing x=77
78 58 58 4d 0 0 0 58 58 58 58 58 58 58 58 58 58 58 58 58 58 78 
Test 23 done, error=0

TEST 24  12:14
pr:  int x(2); x(1)=77; xXX...XXXXXXXXXXXX...XXXXx
parsing int x(3);
78 58 58 2e 2e 2e 0 0 0 0 0 0 0 0 0 0 0 0 2e 2e 2e 58 58 58 58 78 
parsing x(1)=77;
78 58 58 2e 2e 2e 0 0 0 0 4d 0 0 0 0 0 0 0 2e 2e 2e 58 58 58 58 78 
Test 24 done, error=0

TEST 25  12:14
->M<- Back from MC('M',1);
Test 25 done, error=0

TEST 26  12:14
TF
Test 26 done, error=0

TEST 27  12:14
 empty case
Test 27 done, error=0

TEST 28  12:14
 empty case
Test 28 done, error=0

TEST 29  12:14
o
Test 29 done, error=0

TEST 30  12:14
Test 30 (99):
[]/* test 30
[
MC('h',1);MC('e',1)
MC('l',1);MC('l',1);
MC('o',1);MC(' ',1);MC('t',1);MC('c',1);
]

applying st()...
hello tc
Test 30 done, error=0

TEST 31  12:14
Test 31 (127):
[]/* test 31
[
	int i;
	i=3;
	while(i)[
		MC(i,14);i=i-1;
	]
	if(i)[
		MC('T',1);MC(i,14)
	]
	else [
		MC('F',1);MC(i,14)
	]
]

applying st()...
321F0
Test 31 done, error=0

TEST 32  12:14
parsing foo(77);
77
Test 32 done, error=0

TEST 33  12:14
Test 33 (46):
[]/* test 33
[
int a, b(0), c
char d, e(0), f
]

applying st()...

Test 33 done, error=0

TEST 34  12:14
Test 34 (429):
[]/* test 34, link, must set lpr=2, apr-->line 28, epr=nread 

/* put a single character
putchar char c [
	if(c==0)c='"'
	MC 1,c
]

/* put a block of chars from f to l inclusive
pft char f(0),l(0)[
	MC f,t,13
]

/* put a null terminated string
ps char b(0)[
	int k(0)
	k(0)=1
	pft(b, b-1+scann(b,b+30000, 0, k))
]

scann char f(0), l(0), c, int k [

] 

endlibrary

/* globals

int a, b(0), c
char d, e(0), f

main()[]

foobar()[]

applying link()...

Test 34 done, error=0

TEST 35  12:14
t<--MC 1 echoed, and returns t
Test 35 done, error=0

TEST 36  12:14
charIn a abc is 1
charIn b abc is 2
charIn c abc is 3
charIn x abc is 0
Test 36 done, error=0

TEST 37  12:14
Seventy seven 77
Test 37 done, error=0

TEST 38  12:14
pr: -->[ MC("%d %s %d",11,"abc",33,101) ]  <--
 calling st();
11 abc 33
Test 38 done, error=0

TEST 39  12:14
empty case
Test 39 done, error=0

TEST 40  12:14
 empty case
Test 40 done, error=0

TEST 41  12:14
 empty case
Test 41 done, error=0

TEST 42  12:14
 empty case
Test 42 done, error=0

TEST 43  12:14
Hello, test  43
 testing pl,ps,pn,alpha,num,atoi
 should be 1 1 0 -> 1 1 0
num 77 has  2 digits
  and has value 77, and (atoi call) -77 value -77

Test 43 done, error=0

TEST 44  12:14
----tc system level, calling appl main

Hello, test  44
 testing ceqn, index, move
cat in hat

----tc system level, back from main
done

Test 44 done, error=0

TEST 45  12:14
----tc system level, calling appl main

whatHappened, INTENTIONAL ERROR...
app line 6 (cursor pr[4818])SYMERR, decl needed
	  Kcount = 30;   /* <<== tab-tab-space-space K...
	       ^

Test 45 done, error=3

TEST 46  12:14
----tc system level, calling appl main
fopen returned 0
fputs returned 6
fputc returned 1
fputs returned 6
fputc returned 1
fputs returned 15
fputc returned 1
fclose returned 0
READ TEST
fopen returned 1
fgets returned 7
line 1

fgets returned 7
line 2

fgets returned 16
line 3 and last

the blank lines are the newlines fputc put in the file
----tc system level, back from main
done

Test 46 done, error=0

TEST 47  12:14
 empty case
Test 47 done, error=0

TEST 48  12:14
 empty case
Test 48 done, error=0

TEST 49  12:14
 empty case
Test 49 done, error=0

TEST 50  12:14
----tc system level, calling appl main

Hello, Application main
----tc system level, back from main
done

Test 50 done, error=0

TEST 51  12:14
----tc system level, calling appl main
hello tc
hello ps
hello pl. Seventy seven -->  77
----tc system level, back from main
done

Test 51 done, error=0

TEST 52  12:14
----tc system level, calling appl main

23456
----tc system level, back from main
done

Test 52 done, error=0

TEST 53  12:14
----tc system level, calling appl main

      b(3) is 123, b(1) is 123 
----tc system level, back from main
done

Test 53 done, error=0

TEST 54  12:14
----tc system level, calling appl main
ceqn cat cat, then cat dog
 1 0 should be 1 0
foo-bar-and-hello-to-you
foo-bar-and-hello-to-me
ceqn 20:  1 should be 1
ceqn 23:  0 should be 0
scann h:  12 0 should be 12 0
scann g:  11 0 should be 11 0

----tc system level, back from main
done

Test 54 done, error=0

TEST 55  12:14
----tc system level, calling appl main

app line 3 (cursor pr[4732])SYMERR, decl needed
    error = on + purpose
        ^

Test 55 done, error=3

TEST 56  12:14
----tc system level, calling appl main
test 56: index
in ->the cat in the hat<- find cat:    5 should be 5
in ->the cat in the hat<- find dog:    0 should be 0

----tc system level, back from main
done

Test 56 done, error=0

TEST 57  12:14
----tc system level, calling appl main
cat in the hat .......
cat in the hat ..cat..
----tc system level, back from main
done

Test 57 done, error=0

TEST 58  12:14
----tc system level, calling appl main

health(2) should be 2, is 2
----tc system level, back from main
done

Test 58 done, error=0

TEST 59  12:14
----tc system level, calling appl main

numread 490
First 100 chars...
/* test of lib function readfile, reads and prints itself
main[
	char buff(1000)
	char name(0)
	int n<<--

numread 27
 should be 27 including linefeed
abcdefghijklmnopqrstuvwxyz
<<--
----tc system level, back from main
done

Test 59 done, error=0

TEST 60  12:14
----tc system level, calling appl main

abcdefg 7
----tc system level, back from main
done

Test 60 done, error=0

TEST 61  12:14
----tc system level, calling appl main

try i = p; good, now p = i; almost there; 
foobar is that foobar? GOOD

----tc system level, back from main
done

Test 61 done, error=0

TEST 62  12:14
----tc system level, calling appl main
before: The cat in the the hat? or the cathouse?
after: The cat in the the hat? or the cathouse?
----tc system level, back from main
done

Test 62 done, error=0

TEST 63  12:14
----tc system level, calling appl main

double.tg - lrb - 2/5/18
linux eol's
hello
hello 1
world
----tc system level, back from main
done

Test 63 done, error=0

TEST 64  12:14
----tc system level, calling appl main

double.tg - lrb - 2/5/18
windows eol's
hello
hello 1
world
----tc system level, back from main
done

Test 64 done, error=0

TEST 65  12:14
----tc system level, calling appl main

double.tg - lrb - 2/5/18
mac eol's
hello
hello 1
world
----tc system level, back from main
done

Test 65 done, error=0

TEST 66  12:14
----tc system level, calling appl main
writing to test64tempfile: This is test 64, fwrite and fread
reading test64tempfile: 
amount read:  33
content read: This is test 64, fwrite and fread
----tc system level, back from main
done

Test 66 done, error=0

TEST 67  12:14
----tc system level, calling appl main

calling foo 
back from foo
foo returns bar

----tc system level, back from main
done

Test 67 done, error=0

TEST 68  12:14
----tc system level, calling appl main

calling foo 
back from foo
foo returns bar

----tc system level, back from main
done

Test 68 done, error=0

TEST 69  12:14
----tc system level, calling appl main

lib line 253 (cursor pr[4536])EXIT, stopped by exit call
exit [ MC 108 ] 
             ^

Test 69 done, error=98

TEST 70  12:14
----tc system level, calling appl main
YES!!   IT WORKS  x=77 y=88
Now lets do a newline
formated stuff, a table...
                TITLE
Labels: AAA        BBB
Datum1:  11         12
Datum2:  21         22

Now some bad stuff, first a too long format
[ A wrong format 
BAD FMT, max 3 digits, then one of dscx
11s
Now lets be sure varargs is false. To do that force an args error.
good call...
Arg to foo: BAR, (what did you expect?)
bad call by design   *************INTENTIONAL ERROR 21 ...
app line 25 (cursor pr[5422])ARGSERR, args don't match
]
^

Test 70 done, error=21
